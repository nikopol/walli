// miniko.js 0.6
// ~L~ nikomomo@gmail.com 2012-2014
// https://github.com/nikopol/miniko.js
(function(h){var f=h.document,m=function(a){return null===a?[]:a instanceof Array?a:[a]};h._=function(a,c){var b,d,k;if("object"==typeof a)b=a;else if(a.length)if("#"!=a[0]||/[ ,\.\>\<]/.test(a))if(a.match(/^<([^>]+)>$/))b=f.createElement(RegExp.$1);else for(d=f.querySelectorAll(a),b=[],k=0;k<d.length;++k)b.push(d[k]);else b=f.getElementById(a.substr(1));b&&void 0!=c&&m(b).forEach(function(a){a.innerHTML=c});return b};h.append=function(a,c){var b=_(a);if(void 0==c)return b;m(b).forEach(function(a){var b,l=_("<div>",c);for(b=0;b<l.childNodes.length;++b)a.appendChild(l.childNodes[b])});return b};h.css=function(a,c){var b=_(a),d,k,l,e=/([\+\-\*])([^\+\-\*\s]+)/g;if(void 0==c)return b;if("object"==typeof c)m(b).forEach(function(a){for(d in c)a.style[d]=c[d]});else if(/^[\+\-\*]/.test(c))for(;null!==(d=e.exec(c));)k=d[1],l=d[2],m(b).forEach(function(a){var b=a.className.split(/\s+/).filter(function(a){return a});"-"!=k&&-1==b.indexOf(l)?b.push(l):"+"!=k&&(b=b.filter(function(a){return a!=l}));a.className=
b.join(" ")});else"?"==c[0]?(d=0,c=c.substr(1),m(b).forEach(function(a){d+=a.className.split(" ").filter(function(a){return a==c}).length}),b=d):m(b).forEach(function(a){a.className=c});return b};h.ajax=function(a,c){"string"==typeof a&&(a={url:a,ok:c});var b=a.type||"GET",d=a.url||"",k=a.contenttype||"application/x-www-form-urlencoded",l=a.datatype||"application/json",e=new window.XMLHttpRequest,h,g,f;if(a.data){if("string"==typeof a.data)g=a.data;else if(/json/.test(k))g=JSON.stringify(a.data);
else{g=[];for(f in a.data)g.push(encodeURIComponent(f)+"="+encodeURIComponent(a.data[f]));g=g.join("&")}/GET|DEL/i.test(b)&&(d+=/\?/.test(d)?"&"+g:"?"+g,g="")}a.error||(a.error=function(a,b){console.error(a,b)});a.ok||(a.ok=function(){});e.onreadystatechange=function(){if(4==e.readyState)if(h&&clearTimeout(h),/^2/.test(e.status)){g=e.responseText;if(/json/.test(l))try{g=JSON.parse(e.responseText)}catch(b){return a.error("json parse error: "+b.message,e)}a.ok(g,e)}else a.error(e.responseText,e)};e.open(b,
d,!0);e.setRequestHeader("Content-Type",k);if(a.headers)for(f in a.headers)e.setRequestHeader(f,a.headers[f]);a.timeout&&(h=setTimeout(function(){e.onreadystatechange=function(){};e.abort();a.error&&a.error("timeout",e)},1E3*a.timeout));e.send(g);return e};h.position=function(a){return(a=_(a))?(a=a.getBoundingClientRect(),{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}):!1};h.ready=function(a){/complete|loaded|interactive/.test(f.readyState)?a():f.attachEvent?
f.attachEvent("ondocumentready",a()):f.addEventListener("DOMContentLoaded",function(){a()},!1)}})(window);