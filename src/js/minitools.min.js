// minitools.js 0.4
// ~L~ nikomomo@gmail.com 2012-2014
// https://github.com/nikopol/minitools.js
var hash=function(){var b,d,f=function(a){return a.replace(/&/g,"%26").replace(/=/g,"%3D")},g=function(a){var e=[],c;for(c in b)e.push(f(c)+"="+f(b[c]));a&&(d=e.join("&"));document.location.hash="#"+e.join("&");return!0},k=function(){b={};d=document.location.hash.slice(1);d.length&&d.split("&").forEach(function(a){a=a.split("=");1<a.length&&(b[decodeURIComponent(a[0])]=decodeURIComponent(a[1]))})};k();return{del:function(a,e){return b.hasOwnProperty(a)?(delete b[a],g(e)):!1},set:function(a,e,c){return"object"==typeof a?g(e,b=a):g(c,b[a]=e)},get:function(a){return arguments.length?b[a]||"":b},link:function(a){var b=[];if(a)for(var c in a)b.push(c+"="+f(a[c]));return"#"+b.join("&")},onchange:function(a){window.onhashchange=function(){document.location.hash.slice(1)!=d&&(k(),a&&a())}}}}(),hotkeys=function(){var b=!1,d={ESC:27,TAB:9,SPACE:32,RETURN:13,ENTER:13,BACKSPACE:8,BS:8,SCROLL:145,CAPSLOCK:20,NUMLOCK:144,PAUSE:19,INSERT:45,DEL:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,
F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"*":106,"+":107,"-":109,".":110,"/":111,";":186,"=":187,",":188,"`":192,"[":219,"\\":220,"]":221,"'":222},f={ALT:1,CONTROL:2,CTRL:2,SHIFT:4},g=[],k=function(a){a||(a=window.event);var b,c,d=String.fromCharCode(a.which||a.charCode).toUpperCase(),h=a.shiftKey*f.SHIFT|a.ctrlKey*f.CTRL|a.altKey*f.ALT;for(b in g)if(c=g[b],!(a.which!=c.key&&d!=c.key||h!=c.mask||!c.glob&&/INPUT|SELECT|TEXTAREA|KBD/.test(document.activeElement.tagName)&&
27!=c.key))return c.fn(a),a.stopPropagation(),a.preventDefault(),!1;return!0};return{clear:function(){document.onkeydown=null;b=!1;g=[];return this},add:function(a,e,c){var l=0,h=0;"string"==typeof a&&(a=[a]);a.forEach(function(a){"string"==typeof a&&("+"==a?["+"]:a.toUpperCase().split("+")).forEach(function(a){f[a]?l|=f[a]:h=d[a]?d[a]:a[0]});h?(g.push({key:h,fn:e,glob:c,mask:l||0}),b||(document.onkeydown=k,b=!0)):console.error("hotkey "+a+" unknown")});return this}}}(),browser=function(){var b={},
d=navigator.userAgent;/MSIE\s([\d\.]+)/.test(d)&&(b.IE=parseFloat(RegExp.$1));d.replace(/\s\(.+\)/g,"").split(" ").forEach(function(d){/^(.+)\/(.+)$/.test(d)&&(b[RegExp.$1]=parseFloat(RegExp.$2))});return b}(),htmlencode=function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};