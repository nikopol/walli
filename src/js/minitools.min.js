// minitools.js 0.3
// ~L~ nikomomo@gmail.com 2012-2014
// https://github.com/nikopol/minitools.js
var hash=function(){var b,c,e=function(a){return a.replace(/&/g,"%26").replace(/=/g,"%3D")},g=function(){var a=[],f;for(f in b)a.push(e(f)+"="+e(b[f]));document.location.hash="#"+a.join("&");return!0},k=function(){b={};c=document.location.href.replace(/^.*?#/,"");c.length&&c.split("&").forEach(function(a){a=a.split("=");1<a.length&&(b[decodeURIComponent(a[0])]=decodeURIComponent(a[1]))})};k();return{del:function(a){return void 0!=b[a]?(delete b[a],g(b)):!1},set:function(a,f){return g("object"==typeof a?b=a:b[a]=f)},get:function(a){return void 0==a?b:b[a]||""},link:function(a){var b=[];if(a)for(var d in a)b.push(d+"="+e(a[d]));return"#"+b.join("&")},onchange:function(a){window.onhashchange=function(){document.location.href.replace(/^.*?#/,"")!=c&&(k(),a&&a())}}}}(),hotkeys=function(){var b=!1,c={ESC:27,TAB:9,SPACE:32,RETURN:13,ENTER:13,BACKSPACE:8,BS:8,SCROLL:145,CAPSLOCK:20,NUMLOCK:144,PAUSE:19,INSERT:45,DEL:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,
F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"*":106,"+":107,"-":109,".":110,"/":111,";":186,"=":187,",":188,"`":192,"[":219,"\\":220,"]":221,"'":222},e={ALT:1,CONTROL:2,CTRL:2,SHIFT:4},g=[],k=function(a){a||(a=window.event);var b,d,c=String.fromCharCode(a.which||a.charCode).toUpperCase(),h=a.shiftKey*e.SHIFT|a.ctrlKey*e.CTRL|a.altKey*e.ALT;for(b in g)if(d=g[b],!(a.which!=d.key&&c!=d.key||h!=d.mask||!d.glob&&/INPUT|SELECT|TEXTAREA|KBD/.test(document.activeElement.tagName)&&27!=
d.key))return d.fn(a),a.stopPropagation(),a.preventDefault(),!1;return!0};return{clear:function(){document.onkeydown=null;b=!1;g=[];return this},add:function(a,f,d){var l=0,h=0;"string"==typeof a&&(a=[a]);a.forEach(function(a){"string"==typeof a&&("+"==a?["+"]:a.toUpperCase().split("+")).forEach(function(a){e[a]?l|=e[a]:h=c[a]?c[a]:a[0]});h?(g.push({key:h,fn:f,glob:d,mask:l||0}),b||(document.onkeydown=k,b=!0)):console.error("hotkey "+a+" unknown")});return this}}}(),browser=function(){var b={},c=
navigator.userAgent;/MSIE\s([\d\.]+)/.test(c)&&(b.IE=parseFloat(RegExp.$1));c.replace(/\s\(.+\)/g,"").split(" ").forEach(function(c){/^(.+)\/(.+)$/.test(c)&&(b[RegExp.$1]=parseFloat(RegExp.$2))});return b}(),htmlencode=function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};